<input list="studentsList" id="studentName" placeholder="اكتب اسم الطالب"/>
<datalist id="studentsList"></datalist>

<select id="classSelect">
  <option value="اولي-اعدادي">الأولى الإعدادية</option>
  <option value="تانيه-اعدادي">الثانية الإعدادية</option>
  <option value="تالته-اعدادي">الثالثة الإعدادية</option>
  <option value="اولي-ثانوي">الأولى الثانوية</option>
  <option value="تانيه-ثانوي">الثانية الثانوية</option>
  <option value="تالته-ثانوي">الثالثة الثانوية</option>
</select>

<button onclick="searchResult()">عرض النتيجة</button>

<script>
async function loadNames() {
  const response = await fetch("students_results.csv");
  const text = await response.text();
  const rows = text.split("\n").slice(1); // تجاهل أول صف (العناوين)

  const datalist = document.getElementById("studentsList");
  rows.forEach(row => {
    const cols = row.split(",");
    const name = cols[0]?.trim();
    if (name) {
      let option = document.createElement("option");
      option.value = name;
      datalist.appendChild(option);
    }
  });
}
loadNames();

function searchResult() {
  const name = document.getElementById("studentName").value;
  const className = document.getElementById("classSelect").value;
  if (name && className) {
    window.location.href = `result.html?name=${encodeURIComponent(name)}&class=${encodeURIComponent(className)}`;
  } else {
    alert("⚠️ برجاء إدخال الاسم واختيار الصف الدراسي");
  }
}
</script>
